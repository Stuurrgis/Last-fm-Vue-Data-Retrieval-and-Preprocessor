(function(t){function e(e){for(var a,i,o=e[0],c=e[1],u=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(p.length)p.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],a=!0,o=1;o<r.length;o++){var c=r[o];0!==s[c]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},s={app:0},n=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/Last-fm-Vue-Data-Retrieval-and-Preprocessor/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},3843:function(t,e,r){"use strict";r("dc0c")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("img",{staticClass:"logo",attrs:{alt:"last.fm logo",src:r("82d4")}}),a("transition",{attrs:{name:"fade"}},[t.entered?t.entered&&!t.finished?a("div",{key:"2",attrs:{id:"processing"}},[a("p",[t._v("Extracted "+t._s(t.payload["page"]-1)+" out of "+t._s(t.totalPages)+" pages!")])]):t.finished&&!t.artistHistory?a("div",{key:"3",attrs:{id:"done"}},[a("h3",[a("input",{attrs:{type:"button",value:"CSV File Ready to Download!"},on:{click:t.convertToCSV}})]),a("h5",[t._v("Or Search For Artists in Your History:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search Artist"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("br"),a("br"),a("span",t._l(t.filteredResults,(function(e){return a("button",{key:e,staticClass:"artist",on:{click:function(r){return t.changeToArtistHistory(e)}}},[a("pre",[t._v(t._s(e))])])})),0)]):t.artistHistory?a("div",{key:"4",attrs:{id:"history"}},[a("ArtistPlays",{attrs:{artist:t.currArtist,headers:t.dates,row:t.sums[t.currArtist]}}),a("input",{attrs:{type:"button",value:"Go Back"},on:{click:function(e){t.artistHistory=!1}}})],1):t._e():a("div",{key:"1",attrs:{id:"start"}},[a("h1",[t._v("Welcome to the Last.fm Data Retriever!")]),a("h3",[t._v("Enter Last.fm Username")]),a("p",[t._v("(If you are here to demo the application, I suggest using Hauser1992 as a username)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.payload["username"],expression:"payload['username']"}],domProps:{value:t.payload["username"]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter()},input:function(e){e.target.composing||t.$set(t.payload,"username",e.target.value)}}})])])],1)},n=[],i=r("1da1"),o=(r("96cf"),r("d3b7"),r("caad"),r("2532"),r("b64b"),r("25f0"),r("99af"),r("4de4"),r("ac1f"),r("841c"),r("bc3a")),c=r.n(o),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"artistPlays"},[r("h2",[t._v(t._s(t.artist)+" Playcount History")]),t._l(t.yearsActive,(function(e){return r("button",{key:e,staticClass:"years",on:{click:function(r){t.curYear=e}}},[t._v(t._s(e))])})),t._l(t.artistFilteredResults,(function(e){return r("div",{key:e,staticClass:"playcounts"},[r("p",[t._v(t._s(e)+": "+t._s(t.row[e])+" total plays")])])}))],2)},l=[],d={name:"ArtistPlays",data:function(){return{curYear:(new Date).getFullYear(),years:[]}},props:{artist:String,headers:Array,row:Array},methods:{computeYears:function(){this.years=[];for(var t=0;t<this.headers.length;++t){var e=this.headers[t].substring(4,8);this.years.includes(e)||this.years.push(e)}}},computed:{artistFilteredResults:function(){var t=this;return this.headers.filter((function(e){return 0!=t.row[e]&&-1!==e.indexOf(t.curYear)}))},yearsActive:function(){var t=this;return this.computeYears(),this.years.filter((function(e){for(var r=0;r<t.headers.length;++r)if(-1!==t.headers[r].indexOf(e)&&t.row[t.headers[r]])return!0;return!1}))}}},p=d,h=(r("89a4"),r("2877")),f=Object(h["a"])(p,u,l,!1,null,"42adac2a",null),y=f.exports,v={name:"LastFMDataRetriever",data:function(){return{entered:!1,finished:!1,searched:!0,artistHistory:!1,currArtist:"",search:"",lol:" ",payload:{method:"user.getRecentTracks",limit:200,username:" ",page:1,from:0,api_key:"57ee3318536b23ee81d6b27e36997cde",format:"json"},headers:{"user-agert":"Last.fm Bar Chart Race"},totalPages:5,artists:{},artist:[],dates:[],sums:{}}},components:{ArtistPlays:y},methods:{sleep:function(t){return new Promise((function(e){return setTimeout(e,t)}))},changeToArtistHistory:function(t){this.artistHistory=!0,this.currArtist=t;var e=0;if(!Object.prototype.hasOwnProperty.call(this.sums,t)){this.sums[t]=[];for(var r=0;r<this.dates.length;++r)this.header+=this.dates[r]+"  ",Object.prototype.hasOwnProperty.call(this.artists[t],this.dates[r])&&(e+=this.artists[t][this.dates[r]]),this.sums[t][this.dates[r]]=e}},onEnter:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.entered=!0,c.a.get("http://ws.audioscrobbler.com/2.0/",{params:t.payload,headers:t.headers}).then((function(e){t.totalPages=parseInt(e.data["recenttracks"]["@attr"]["totalPages"])})),e.next=4,t.sleep(300);case 4:t.payload["page"];case 5:if(!(t.payload["page"]<=t.totalPages)){e.next=12;break}return c.a.get("http://ws.audioscrobbler.com/2.0/",{params:t.payload,headers:t.headers}).then((function(e){t.makeList(e.data)})).catch((function(e){console.log("ERROR: ".concat(e)),t.payload["page"]-=1})),e.next=9,t.sleep(350);case 9:++t.payload["page"],e.next=5;break;case 12:return e.next=14,t.sleep(350);case 14:t.finished=!0;case 15:case"end":return e.stop()}}),e)})))()},makeList:function(t){for(var e,r,a,s=0;s<t["recenttracks"]["track"].length;++s)e=t["recenttracks"]["track"][s],0!=Object.prototype.hasOwnProperty.call(e,"date")&&(r=e["artist"]["#text"],a=e["date"]["#text"].substring(3,e["date"]["#text"].indexOf(",")),-1!==a.indexOf("1970")&&(a="No Date"),0==Object.prototype.hasOwnProperty.call(this.artists,r)&&(this.artist.push(r),this.artists[r]=1,this.artists[r]={}),0==Object.prototype.hasOwnProperty.call(this.artists[r],a)?this.artists[r][a]=1:this.artists[r][a]+=1,this.dates.includes(a)||this.dates.unshift(a))},convertToCSV:function(){var t=0,e="";this.dates.unshift("artist");for(var r=0;r<this.dates.length;++r)""!==e&&(e+=","),e+=this.dates[r];for(e+="\n",r=0;r<Object.keys(this.artists).length;++r){var a=this.artist[r];t=0,e+=a+",";for(var s=1;s<this.dates.length;++s)Object.prototype.hasOwnProperty.call(this.artists[a],this.dates[s])&&(t+=this.artists[a][this.dates[s]],e+=t.toString()),s+1!=this.dates.length&&(e+=",");e+="\n"}var n=document.createElement("a");n.href="data:text/csv;charset=utf-8,"+encodeURIComponent(e),n.target="_blank",n.download=this.payload["username"].concat("_History.csv"),n.click()}},computed:{filteredResults:function(){var t=this,e=0;return this.artist.filter((function(r){if(""!==t.search&&15!=e)return r.toLowerCase().includes(t.search.toLowerCase())?(++e,!0):void 0}))}}},m=v,g=(r("3843"),Object(h["a"])(m,s,n,!1,null,null,null)),b=g.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(b)}}).$mount("#app")},"82d4":function(t,e,r){t.exports=r.p+"img/last_fm_logo.52a5d69a.png"},"89a4":function(t,e,r){"use strict";r("9aa1")},"9aa1":function(t,e,r){},dc0c:function(t,e,r){}});
//# sourceMappingURL=app.9ba35fb3.js.map